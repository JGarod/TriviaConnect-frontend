<!-- Bottom Navigation (solo en móvil) -->
<!-- <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-blancoPuro border-t shadow-lg"> -->
<nav class=" fixed bottom-0 left-0 right-0 bg-blancoPuro border-t shadow-lg">
    <div class="flex items-center justify-around py-2">

        <!-- Navegación principal -->
        <a *ngFor="let item of navigationItems" [routerLink]="item.route" routerLinkActive="text-azulSecundario"
            class="flex flex-col items-center py-2 px-2 text-grisOscuro hover:text-azulSecundario transition-colors">
            <span class="material-icons text-xl mb-1">{{item.icon}}</span>
            <span class="text-xs font-medium">{{item.label}}</span>
        </a>

        <!-- Usuario -->
        <button (click)="toggleMobileUserMenu()"
            [class]="'flex flex-col items-center py-2 px-2 transition-colors ' + (showMobileUserMenu ? 'text-azulSecundario' : 'text-grisOscuro hover:text-azulSecundario')">
            <span class="material-icons text-xl mb-1">account_circle</span>
            <span class="text-xs font-medium">Usuario</span>
        </button>
    </div>
</nav>

<!-- Modal/Sheet de usuario en móvil -->
<div *ngIf="showMobileUserMenu"
    [class]="'fixed inset-x-0 bottom-0 z-50 transition-transform duration-300 ' + (showMobileUserMenu ? 'translate-y-0' : 'translate-y-full')">
    <div class="bg-blancoPuro rounded-t-xl shadow-lg border-t">
        <!-- Handle para arrastrar -->
        <div class="flex justify-center py-3">
            <div class="w-8 h-1 bg-grisClaro2 rounded-full"></div>
        </div>

        <!-- Header del modal -->
        <div class="px-4 pb-4 border-b">
            <div class="flex items-center space-x-3">
                <img src="{{ruserData?.img}}" alt="Avyyatar" class="h-12 w-12 rounded-full">
                <div>
                    <h3 class="font-semibold text-grisOscuro">{{ ruserData?.username || '' }}</h3>
                </div>
            </div>
        </div>

        <!-- Opciones del usuario -->
        <div class="p-4 space-y-2">
            <a (click)="irPerfil()"
                class="flex items-center p-3 rounded-lg hover:bg-blancoPuro transition-colors">
                <span class="material-icons text-grisOscuro mr-3">person</span>
                <span class="font-medium text-grisOscuro">Mi Perfil</span>
            </a>

            <a routerLink="/settings" (click)="closeMobileUserMenu()"
                class="flex items-center p-3 rounded-lg hover:bg-blancoPuro transition-colors">
                <span class="material-icons text-grisOscuro mr-3">settings</span>
                <span class="font-medium text-grisOscuro">Configuración</span>
            </a>

            <a routerLink="/notifications" (click)="closeMobileUserMenu()"
                class="flex items-center p-3 rounded-lg hover:bg-blancoPuro transition-colors">
                <span class="material-icons text-grisOscuro mr-3">notifications</span>
                <span class="font-medium text-grisOscuro">Notificaciones</span>
            </a>

            <hr class="my-2">

            <button (click)="logout()"
                class="w-full flex items-center p-3 rounded-lg hover:bg-red-50 text-red-600 transition-colors">
                <span class="material-icons mr-3">logout</span>
                <span class="font-medium">Cerrar Sesión</span>
            </button>
        </div>

        <!-- Espacio para el bottom navigation -->
        <div class="h-5"></div>
    </div>
</div>

<!-- Overlay para cerrar modal de usuario móvil -->
<div *ngIf="showMobileUserMenu"
    [class]="'fixed inset-0 bg-black bg-opacity-50 z-40 ' + (showMobileUserMenu ? 'block' : 'hidden')"
    (click)="closeMobileUserMenu()"></div>

<!-- Overlay para cerrar dropdown en móvil -->
<div [class]="'fixed inset-0 z-40 ' + (showUserDropdown ? 'block' : 'hidden')" (click)="closeUserDropdown()"></div>